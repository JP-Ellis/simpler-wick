%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Simpler Wick Contractions
% Copyright (C) 2014  Joshua Ellis
%
% An simpler implementation of the Wick contractions.
%
%
% This work may be distributed and/or modified under the conditions of the LaTeX
% Project Public License, either version 1.3 of this license or (at your option)
% any later version.
%
% This work has the LPPL maintenance status `maintained'.
%
% The Current Maintainer of this work is Joshua Ellis.
%
% This program is distributed in the hope that it will be useful, but WITHOUT
% ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
% FOR A PARTICULAR PURPOSE.  See the LaTeX Project Public License for more
% details.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input tikz.tex

% makeatletter
\edef\simplerwickatcode{\the\catcode`\@}
\catcode`\@=11
 
% Definition of \@ifnextchar from LaTeX
\long\def\@ifnextchar#1#2#3{%
  \let\reserved@d=#1%
  \def\reserved@a{#2}%
  \def\reserved@b{#3}%
  \futurelet\@let@token\@ifnch}
 
\def\@ifnch{%
  \ifx\@let@token\@sptoken
    \let\reserved@c\@xifnch
  \else
    \ifx\@let@token\reserved@d
      \let\reserved@c\reserved@a
    \else
      \let\reserved@c\reserved@b
    \fi
  \fi
  \reserved@c}

%\@sptoken is also in Plain
\def\:{\@xifnch} \expandafter\def\: {\futurelet\@let@token\@ifnch}
 
% \PackageWarning from LaTeX
\def\PackageWarning#1#2{%
   \GenericWarning{%
      (#1)\@spaces\@spaces\@spaces\@spaces
   }{%
      Package #1 Warning: #2%
   }%
}
 
\def\GenericWarning#1#2{%
   \begingroup
      \def\MessageBreak{^^J#1}%
      \set@display@protect
      \immediate\write\@unused{^^J#2\on@line.^^J}%
   \endgroup
}
 
\newwrite\@unused
\def\@spaces{\space\space\space\space}
\def\set@display@protect{\let\protect\string}
\def\on@line{ on input line \the\inputlineno}
 
% Externalize is not available in Plain.  Make them no-ops.
\let\tikzexternalenable\relax
\let\tikzexternaldisable\relax
 
% Input the code
\input simpler-wick.code.tex
 
% makeatother
\catcode`\@=\simplerwickatcode

\endinput

% Local Variables:
% TeX-master: "simpler-wick-plain"
% End:
